#N canvas 641 23 727 844 10;
#X declare -lib ofelia;
#X obj 27 318 ofHead;
#X obj 572 29 declare -lib ofelia;
#X text 200 137 load .vert and .frag shaders from the path.;
#X obj 27 110 ofWindow 640 400 LEFT TOP 1 55;
#X obj 27 136 ofLoadShader @shader shader;
#X obj 27 162 ofLoadImage @backgroundImage A.jpg;
#X obj 27 188 ofLoadImage @foregroundImage B.jpg;
#X text 25 53 please find "ofFbo" section from http://openframeworks.cc/ofBook/chapters/shaders.html
to see the original code and learn more about how it works.;
#X text 380 784 This example is based on the openFrameworks example
"07_fboAlphaMask";
#X obj 27 214 ofLoadImage @brushImage brush.png;
#X obj 66 360 ofValue @bBrushDown;
#X obj 66 381 sel 1;
#X obj 66 423 ofCreateFbo @maskFbo;
#X obj 46 636 ofCreateFbo @fbo;
#X obj 27 282 ofSnd @allocFbos;
#X obj 66 444 t b b;
#X obj 93 465 ofExpr \; _brushImageSize = 50 \; _brushImageX = @mouseX
- _brushImageSize * 0.5 \; _brushImageY = @mouseY - _brushImageSize
* 0.5 \; $o1 = _brushImageX \; $o2 = _brushImageY \; $o3 = _brushImageSize
\; $o4 = _brushImageSize \;;
#X obj 256 240 ofMouseListener, f 39;
#X obj 371 261 list split 1;
#X obj 405 282 ofDefine \; @mouseX = $i1 \; @mouseY = $i2 \;;
#X obj 66 589 ofDrawImage @brushImage;
#X obj 66 568 ofTranslate;
#X obj 84 402 ofRcv @allocFbos;
#X obj 66 615 ofRcv @allocFbos;
#X obj 46 662 ofClear 0 0;
#X obj 46 688 ofApplyShader @shader;
#X obj 46 709 ofSetShaderUniformTex maskTex @maskFbo 1;
#X obj 27 339 t b b b;
#X msg 256 326 1;
#X obj 256 352 ofSnd @bBrushDown;
#X msg 287 326 0;
#X obj 46 730 ofDrawImage @backgroundImage 640 400;
#X obj 27 754 ofDrawImage @foregroundImage 640 400;
#X obj 28 775 ofDrawFbo @fbo 640 400;
#X obj 27 240 ofWindowLoadBang;
#X msg 27 261 allocate 640 400 RGBA \, color 0 255;
#X msg 281 283 color 0 255;
#X text 298 709 here is where the fbo is passed to the shader.;
#X text 124 656 clean everything with alpha mask on 0 to make it transparent
by default.;
#X text 152 636 here \, the shader-masking happens.;
#X obj 256 261 route 1 3;
#X obj 110 381 ofRcv @clearMaskFbo;
#X obj 281 304 ofSnd @clearMaskFbo;
#X text 25 19 left click and drag the mouse to draw alpha mask. right
click the mouse to clear it.;
#X connect 0 0 27 0;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 12 0 15 0;
#X connect 13 0 24 0;
#X connect 15 0 21 0;
#X connect 15 1 16 0;
#X connect 16 0 21 1;
#X connect 16 1 21 2;
#X connect 16 2 20 1;
#X connect 16 3 20 2;
#X connect 17 0 40 0;
#X connect 17 1 18 0;
#X connect 17 2 30 0;
#X connect 18 1 19 0;
#X connect 21 0 20 0;
#X connect 22 0 12 0;
#X connect 23 0 13 0;
#X connect 24 0 25 0;
#X connect 25 0 26 0;
#X connect 26 0 31 0;
#X connect 27 0 32 0;
#X connect 27 1 13 0;
#X connect 27 2 10 0;
#X connect 28 0 29 0;
#X connect 30 0 29 0;
#X connect 32 0 33 0;
#X connect 34 0 35 0;
#X connect 35 0 14 0;
#X connect 36 0 42 0;
#X connect 40 0 28 0;
#X connect 40 1 36 0;
#X connect 41 0 12 0;
